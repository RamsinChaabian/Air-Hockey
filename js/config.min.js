const canvas=document.getElementById("c"),ctx=canvas.getContext("2d"),modal=document.getElementById("modal"),startSinglePlayerBtn=document.getElementById("startSinglePlayerBtn"),startTwoPlayerBtn=document.getElementById("startTwoPlayerBtn"),fsBtn=document.getElementById("fullscreenBtn"),scoreAEl=document.getElementById("scoreA"),scoreBEl=document.getElementById("scoreB"),timerEl=document.getElementById("timer"),matchMinutesSelect=document.getElementById("matchMinutes"),playerALabel=document.getElementById("playerALabel"),messageOverlay=document.getElementById("messageOverlay"),pauseBtn=document.getElementById("pauseBtn"),resetBtn=document.getElementById("resetBtn"),state={running:!1,paused:!1,scoreA:0,scoreB:0,matchTime:120,timeLeft:0,gameMode:"singlePlayer",penaltyFor:null,goldenGoal:!1};let puck,paddleA,paddleB,lastTouch=null;const keys={},activeTouch={},prevPad={},shoot={cooldownA:0,cooldownB:0,aiCooldown:0,distance:18,basePowerHuman:800,velocityPowerMultiplier:1.8,powerAI:4e3,cooldownHuman:.35,cooldownAI:.65},turbo={accelerationMultiplier:2.8,maxSpeedMultiplier:2.5,powerMultiplier:2.2};let flashTimer=0,flashSide=null,shakeTimer=0,shakeIntensity=0;