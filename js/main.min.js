let last=performance.now(),lastState=null;function initializeApp(){console.log("Initializing Air Hockey AI..."),resize(),resetObjects(),setupEventListeners(),requestAnimationFrame(loop)}async function loop(t){if(state.paused)return void requestAnimationFrame(loop);const e=Math.min(.03,(t-last)/1e3);last=t;const a=state.scoreA,s=state.scoreB,n=state.penaltyFor;state.running&&(handleGamepadInput(e),stepPhysics(e));let i=state.scoreA>a,o=state.scoreB>s,r="A"!==n&&"A"===state.penaltyFor;trainAI(i,o,r);let l=0,c=0;shakeTimer>0&&(l=(Math.random()-.5)*shakeIntensity,c=(Math.random()-.5)*shakeIntensity,ctx.translate(l,c),shakeTimer-=e,shakeIntensity*=.95),draw(e),shakeTimer>0&&ctx.translate(-l,-c),requestAnimationFrame(loop)}initializeApp();